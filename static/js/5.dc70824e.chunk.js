(this["webpackJsonpmanagement-done"]=this["webpackJsonpmanagement-done"]||[]).push([[5],{417:function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"b",(function(){return O})),n.d(t,"h",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return x}));var r=n(43),c=n(34),i=n(0),a=n(443),u=n(445),o=n(110),j=n(173),b=n(426),d=n(419),s=function(){var e=Object(d.b)(["name","personId"]),t=Object(c.a)(e,2),n=t[0],a=t[1];return[Object(i.useMemo)((function(){return Object(r.a)(Object(r.a)({},n),{},{personId:Number(n.personId)||void 0})}),[n]),a]},l=function(){var e=s();return["projects",Object(c.a)(e,1)[0]]},O=function(e){var t=Object(j.b)();return Object(a.a)(["admin",e||{}],(function(){return t("users",{query:e||{}})}))},f=function(e){var t=Object(j.b)();return Object(a.a)(["projects",Object(o.a)(e)],(function(){return t("projects",{query:e||{}})}))},h=function(e){var t=Object(j.b)();return Object(a.a)(["project",{id:e}],(function(){return t("projects/".concat(e))}),{enabled:Boolean(e)})},m=function(e){var t=Object(j.b)();return Object(u.a)((function(e){return t("projects/".concat(e.id),{method:"PATCH",query:e})}),Object(b.c)(e))},p=function(e){var t=Object(j.b)();return Object(u.a)((function(e){return t("projects",{query:e,method:"POST"})}),Object(b.a)(e))},v=function(e){var t=Object(j.b)();return Object(u.a)((function(e){var n=e.id;return t("projects/".concat(n),{method:"DELETE"})}),Object(b.b)(e))},x=function(){var e=Object(d.b)(["createProject"]),t=Object(c.a)(e,2),n=t[0].createProject,r=t[1],i=Object(d.b)(["editProject"]),a=Object(c.a)(i,2),u=a[0].editProject,o=a[1],j=Object(d.a)(),b=h(Number(u)),s=b.data,l=b.isLoading;return{ismodalOpen:"true"===n||Boolean(u),createModalUrl:function(){return r({createProject:!0})},colseModalUrl:function(){return j({createProject:"",editProject:""})},editModalUrl:function(e){return o({editProject:e})},editingProject:s,isLoading:l}}},418:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(43),c=n(417),i=n(421),a=n(28),u=function(e){var t=Object(c.b)().data;return Object(a.jsx)(i.a,Object(r.a)({options:t||[]},e))}},419:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return j}));var r=n(43),c=n(34),i=n(0),a=n(172),u=n(110),o=function(e){var t=Object(a.c)(),n=Object(c.a)(t,1)[0],r=j(),o=Object(i.useState)(e),b=Object(c.a)(o,1)[0];return[Object(i.useMemo)((function(){return Object(u.c)(Object.fromEntries(n),b)}),[n,b]),function(e){return r(e)}]},j=function(){var e=Object(a.c)(),t=Object(c.a)(e,2),n=t[0],i=t[1];return function(e){var t=Object(u.a)(Object(r.a)(Object(r.a)({},Object.fromEntries(n)),e));return i(t)}}},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(43),c=n(170),i=n(109),a=n(28),u=function(e){var t=e.value,n=e.onChange,u=e.defaultOptionName,j=e.options,b=Object(c.a)(e,["value","onChange","defaultOptionName","options"]);return Object(a.jsxs)(i.a,Object(r.a)(Object(r.a)({value:(null===j||void 0===j?void 0:j.length)?o(t):0,onChange:function(e){return null===n||void 0===n?void 0:n(o(e)||void 0)}},b),{},{children:[u?Object(a.jsx)(i.a.Option,{value:0,children:u}):null,null===j||void 0===j?void 0:j.map((function(e){return Object(a.jsx)(i.a.Option,{value:e.id,children:e.name},e.id)}))]}))},o=function(e){return isNaN(Number(e))?0:Number(e)}},426:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return m}));var r=n(125),c=n(43),i=n(19),a=n.n(i),u=n(50),o=n(234),j=function(e){var t=e.fromId,n=e.type,c=e.referenceId,i=e.list,a=Object(r.a)(i),u=a.findIndex((function(e){return e.id===t}));if(!c)return d(Object(r.a)(a),u,a.length-1);var o=a.findIndex((function(e){return e.id===c}));return("after"===n?d:b)(Object(r.a)(a),u,o)},b=function(e,t,n){var r=e[n],c=e.splice(t,1)[0],i=e.indexOf(r);return e.splice(i,0,c),e},d=function(e,t,n){var r=e[n],c=e.splice(t,1)[0],i=e.indexOf(r);return e.splice(i+1,0,c),e},s=function(e,t){var n=Object(o.b)();return{onSuccess:function(){return n.invalidateQueries(e)},onMutate:function(r){return Object(u.a)(a.a.mark((function c(){var i;return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i=n.getQueryData(e),n.setQueryData(e,(function(e){return t(r,e)})),c.abrupt("return",{previousItems:i});case 3:case"end":return c.stop()}}),c)})))()},onError:function(t,r,c){n.setQueryData(e,c.previousItems)}}},l=function(e){return s(e,(function(e,t){return(null===t||void 0===t?void 0:t.filter((function(t){return t.id!==e.id})))||[]}))},O=function(e){return s(e,(function(e,t){return(null===t||void 0===t?void 0:t.map((function(t){return t.id===e.id?Object(c.a)(Object(c.a)({},t),e):t})))||[]}))},f=function(e){return s(e,(function(e,t){return t?[].concat(Object(r.a)(t),[e]):[]}))},h=function(e){return s(e,(function(e,t){return j(Object(c.a)({list:t},e))}))},m=function(e){return s(e,(function(e,t){return j(Object(c.a)({list:t},e)).map((function(t){return t.id===e.fromId?Object(c.a)(Object(c.a)({},t),{},{kanbanId:e.toKanbanId}):t}))}))}},441:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return B}));var r,c,i,a,u,o,j,b,d=n(96),s=n(97),l=n(148),O=n(424),f=n(425),h=n(0),m=n(20),p=n(409),v=n(416),x=n(444),g=n(417),y=n(28),I=function(){var e=Object(g.b)(),t=e.data,n=e.refetch,r=Object(y.jsx)(p.a.Text,{type:"secondary",children:"\u7ec4\u5458\u5217\u8868"}),c=Object(y.jsx)(k,{children:Object(y.jsx)(v.b,{header:r,size:"small",children:null===t||void 0===t?void 0:t.map((function(e){return Object(y.jsx)(v.b.Item,{children:Object(y.jsx)(v.b.Item.Meta,{title:e.name})},e.id)}))})});return Object(y.jsx)(x.a,{onVisibleChange:function(){return n()},placement:"bottom",content:c,children:Object(y.jsx)("span",{children:"\u7ec4\u5458"})})},k=s.a.div(r||(r=Object(d.a)(["\n  min-width: 30rem;\n"]))),P=n(77),w=function(){var e=Object(g.f)().createModalUrl,t=Object(g.h)(),n=t.data,r=t.refetch,c=null===n||void 0===n?void 0:n.filter((function(e){return e.pin})),i=Object(y.jsx)(p.a.Text,{type:"secondary",children:"\u6536\u85cf\u9879\u76ee"}),a=Object(y.jsx)(P.a,{onClick:e,type:"link",children:"\u521b\u5efa\u9879\u76ee"}),u=Object(y.jsx)(C,{children:Object(y.jsx)(v.b,{header:i,footer:a,size:"small",children:null===c||void 0===c?void 0:c.map((function(e){return Object(y.jsx)(v.b.Item,{children:Object(y.jsx)(v.b.Item.Meta,{title:e.name})},e.id)}))})});return Object(y.jsx)(x.a,{onVisibleChange:function(){return r()},placement:"bottom",content:u,children:Object(y.jsx)("span",{children:"\u9879\u76ee"})})},C=s.a.div(c||(c=Object(d.a)(["\n  min-width: 30rem;\n"]))),M=n(79),N=n(110),E=n(43),q=n(170),z=n(34),F=n(412),L=n(414),T=n(165),D=n(413),U=n(418),Q=function(){var e=Object(g.f)(),t=e.ismodalOpen,n=e.colseModalUrl,r=e.editingProject,c=e.isLoading,i=(r?g.d:g.a)(Object(g.i)()),a=i.mutateAsync,u=i.error,o=i.isLoading,j=F.a.useForm(),b=Object(z.a)(j,1)[0],d=r?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee";return Object(h.useEffect)((function(){b.setFieldsValue(r)}),[r,b]),Object(y.jsx)(L.a,{forceRender:!0,onClose:function(){b.resetFields(),n()},visible:t,width:"100%",children:Object(y.jsx)(S,{children:c?Object(y.jsx)(T.a,{size:"large"}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{children:d}),Object(y.jsx)(P.b,{error:u}),Object(y.jsxs)(F.a,{form:b,layout:"vertical",style:{width:"40rem"},onFinish:function(e){var t=e,c=t.projectname,i=Object(q.a)(t,["projectname"]);e=Object(E.a)(Object(E.a)({},i),{},{name:c}),a(Object(E.a)(Object(E.a)({},r),e)).then((function(){b.resetFields(),n()}))},children:[Object(y.jsx)(F.a.Item,{label:"\u540d\u79f0",name:"projectname",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d"}],children:Object(y.jsx)(D.a,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"})}),Object(y.jsx)(F.a.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"}],children:Object(y.jsx)(D.a,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"})}),Object(y.jsx)(F.a.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId",children:Object(y.jsx)(U.a,{defaultOptionName:"\u8d1f\u8d23\u4eba"})}),Object(y.jsx)(F.a.Item,{style:{textAlign:"right"},children:Object(y.jsx)(l.a,{loading:o,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},S=s.a.div(i||(i=Object(d.a)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),A=Object(h.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(11)]).then(n.bind(null,442))})),V=Object(h.lazy)((function(){return n.e(9).then(n.bind(null,436))}));function B(){return Object(y.jsxs)(G,{children:[Object(y.jsx)(H,{}),Object(y.jsx)(K,{children:Object(y.jsx)(h.Suspense,{fallback:Object(y.jsx)(P.d,{}),children:Object(y.jsxs)(m.d,{children:[Object(y.jsx)(m.b,{path:"/projects",element:Object(y.jsx)(A,{})}),Object(y.jsx)(m.b,{path:"/projects/:projectId/*",element:Object(y.jsx)(V,{})}),Object(y.jsx)(m.a,{to:"/projects"})]})})}),Object(y.jsx)(Q,{})]})}var H=function(){return Object(y.jsxs)(R,{between:!0,children:[Object(y.jsxs)(W,{gap:!0,children:[Object(y.jsx)(l.a,{type:"link",onClick:N.b,width:"18rem",children:"LOGO"}),Object(y.jsx)(w,{}),Object(y.jsx)(I,{})]}),Object(y.jsx)(X,{children:Object(y.jsx)(J,{})})]})},J=function(){var e=Object(M.b)(),t=e.logout,n=e.user,r=Object(y.jsx)(O.a,{children:Object(y.jsx)(O.a.Item,{children:Object(y.jsx)(l.a,{onClick:t,type:"link",children:"\u767b\u51fa"})},"logout")});return Object(y.jsx)(f.a,{overlay:r,children:Object(y.jsxs)(l.a,{type:"link",onClick:function(e){return e.preventDefault()},children:["Hi, ",null===n||void 0===n?void 0:n.name]})})},G=s.a.div(a||(a=Object(d.a)(["\n  display: grid;\n  grid-template-rows: 6rem 1fr;\n  height: 100vh;\n"]))),K=s.a.main(u||(u=Object(d.a)(["\n  height: calc(100vh - 6rem);\n"]))),R=Object(s.a)(P.e)(o||(o=Object(d.a)(["\n  padding: 3.2rem;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n"]))),W=Object(s.a)(P.e)(j||(j=Object(d.a)([""]))),X=s.a.div(b||(b=Object(d.a)([""])))}}]);